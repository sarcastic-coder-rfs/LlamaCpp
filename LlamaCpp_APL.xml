<?xml version="1.0" encoding="utf-8"?>
<!-- LlamaCpp Android Packaging -->
<root xmlns:android="http://schemas.android.com/apk/res/android">
	<init>
		<log text="LlamaCpp APL init"/>
	</init>

	<!-- Copy .so files into the APK -->
	<resourceCopies>
		<copyFile src="$S(PluginDir)/ThirdParty/llama/lib/Android/arm64-v8a/libggml-base.so"
				  dst="$S(BuildDir)/libs/arm64-v8a/libggml-base.so"/>
		<copyFile src="$S(PluginDir)/ThirdParty/llama/lib/Android/arm64-v8a/libggml-cpu.so"
				  dst="$S(BuildDir)/libs/arm64-v8a/libggml-cpu.so"/>
		<copyFile src="$S(PluginDir)/ThirdParty/llama/lib/Android/arm64-v8a/libggml.so"
				  dst="$S(BuildDir)/libs/arm64-v8a/libggml.so"/>
		<copyFile src="$S(PluginDir)/ThirdParty/llama/lib/Android/arm64-v8a/libllama.so"
				  dst="$S(BuildDir)/libs/arm64-v8a/libllama.so"/>
	</resourceCopies>

	<!-- Load .so files in dependency order -->
	<soLoadLibrary>
		<loadLibrary name="ggml-base" failmsg="Failed to load libggml-base.so"/>
		<loadLibrary name="ggml-cpu" failmsg="Failed to load libggml-cpu.so"/>
		<loadLibrary name="ggml" failmsg="Failed to load libggml.so"/>
		<loadLibrary name="llama" failmsg="Failed to load libllama.so"/>
	</soLoadLibrary>
</root>
